<!-- {% load staticfiles %} -->
<html>

<head>
  <title>Notifier</title>
<!--  <script src="{% static '/channels/js/websocketbridge.js' %}" type="text/javascript"></script>-->
</head>

<body>
  <h1>Notifier</h1>
  <p>Notifications</p>
  <ul id="notifylist"></ul>
  <p>data</p>
  <ul id="datalist"></ul>
  <script>
    // document.addEventListener('DOMContentLoaded', function () {
    //   const webSocketBridge = new channels.WebSocketBridge();
    //   const n1 = document.querySelector("#datalist");
    //   webSocketBridge.connect('/ws/');
    //   webSocketBridge.listen(function (action, stream) {
    //     console.log("RESPONSE:", action);
    //     if (action.event == "New Facultad") {
    //       var el = document.createElement("li");
    //       el.innerHTML = `New Facultad <b>${action.facultad}</b> has joined!`;
    //       n1.appendChild(el);
    //     }
    //   })
    //   document.ws = webSocketBridge; /* for debugging */
    // })
    var chatSocket = new WebSocket('ws://' + window.location.host +'/ws/');
    console.log('ws://' + window.location.host +'/ws/');
    const n1 = document.querySelector('#datalist');
      chatSocket.onopen = () => {
      console.log('WebSocket open');
    };
    chatSocket.onmessage = e => {
      //console.log(e.data);
      action =JSON.parse(e.data)
      if (action.event == "New Facultad") {
          var el = document.createElement("li");
          el.innerHTML = `New Facultad <b>${action.facultad}</b> has joined!`;
          n1.appendChild(el);
        }
    };
  </script>
</body>

</html>